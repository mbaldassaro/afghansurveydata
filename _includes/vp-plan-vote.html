<!-- Voter Participation - Plan to Vote in 2015 -->

<style>
      
        svg {
            display: block;
            float: left;
            height: 66%;
            width: 500px;
        } 

/*
  Minimum height and width is a good idea to prevent negative SVG dimensions...
  For example width should be =< margin.left + margin.right + 1,
  of course 1 pixel for the entire chart would not be very useful, BUT should not have errors
*/


</style>

    <div id="wrapper">
        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    
                    <h1 class="page-header"><strong>PLAN TO VOTE IN PARLIAMENTARY ELECTIONS</strong></h1>

                </div>
            </div>
                    
                     <svg id="chart1" class="with-3d-shadow with-transitions"></svg>
                     <svg id="chart2" class="with-3d-shadow with-transitions"></svg>
                    

                <div id="menu-wrapper">
                    <div id="menu-canvas">
                    <div id="site-menu"> 
                    
                        <h4>Do you plan to vote in the 2015 parliamentary elections?</h4>
                        <p>The vast majority of respondents indicated that they plan to vote in the 2015 parliamentary elections. Respondents from the south were the least likely to say they would vote in the next election, although a robust majority said they would vote. Eight-in-nine men reported they would vote in the upcoming elections while seven-in-nine women said the same.</p>
                    </div> 
            
                    
                    <a class="toggle-nav btn btn-sm btn-primary" id="info"><i class="fa fa-info"></i></a>
                    <a class="toggle-nav"></a>    
                </div> 
               </div>     
            </div>
        </div> 


    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <script>
   
var data1 = [
        {key: "Yes", y: 82.3},
        {key: "No", y: 12.8},
        {key: "Don't Know", y: 4.6}
    ];

   var data2 = [
    {
        "key": "Yes",
        "color": "#005288", //blue
        "values": [
            { "label": "National Average", "value": 82.3 },
            { "label": "Central", "value": 78.5 }, 
            { "label": "Central Highlands", "value": 93.9 },
            { "label": "East", "value": 87.1 },
            { "label": "North", "value": 82.9 },
            { "label": "North East", "value": 85.6 },
            { "label": "South", "value": 66.6 },
            { "label": "South East", "value": 91.0 },
            { "label": "West", "value": 85.0 }
        ]
    },
    {
        "key": "No",
        "color": "#800000", //red
        "values": [
            { "label": "National Average", "value": 12.8 },
            { "label": "Central", "value": 17.5 },
            { "label": "Central Highlands", "value": 0.8 },
            { "label": "East", "value": 7.5 },
            { "label": "North", "value": 10.1 },
            { "label": "North East", "value": 4.1 },
            { "label": "South", "value": 30.5 },
            { "label": "South East", "value": 8.0 },
            { "label": "West", "value": 12.2 }
        ]
    }
]
    

nv.addGraph(function() {
        var chart = nv.models.pieChart()
            .x(function(d) { return d.key })
            .y(function(d) { return d.y })
            .color(["#005288", "#800000", "gray"]) 
            .labelType("value")
            //.tooltips(false)
            .tooltipContent(function(key, y, e, graph) {
                return '<h5 style="padding: 5px; text-align: center">' + key + '</h5>'
                        + '<p style="padding: 5px;">' +  y + '%</p>';
            })
            //.width(width)
            //.height(height);
        d3.select("#chart1")
            .datum(data1)
            .transition().duration(1200)
            .call(chart);
        return chart;
    });

nv.addGraph(function() {
  var chart = nv.models.multiBarHorizontalChart()
      .x(function(d) { return d.label })
      .y(function(d) { return d.value / 100 })
      .margin({left: 100})
      /*.tooltipContent(function(key, x, y, e, graph) {
        return '<h5 style="text-align:center; padding:0px; color:#000; font-weight: 700">' + key + " (" + x + ")</h5><h4 style='text-align: center; color: #000; font-weight: 700;'>" + y + '</h5>'
    });*/

      
        //.showValues(false)
        .tooltips(true)
        //.barColor(d3.scale.category20().range())
        //.stacked(true)
        //.showControls(false);

  chart.yAxis 
    .tickFormat(d3.format('.1%'));
  //chart.xAxis
    //.tickFormat(d3.format('d'));

  d3.select('#chart2')
      .datum(data2)
      .transition().duration(1200)
      .call(chart);

  nv.utils.windowResize(chart.update);

  chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

  return chart;
});

</script>