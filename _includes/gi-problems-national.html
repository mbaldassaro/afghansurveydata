<!--General Issues - Biggest Problems at The National Level-->

<style>
      
        svg {
            display: block;
            float: left;
            height: 66%;
            min-width: 100%;
        } 

        /*#chart1 {
            margin: 30px;
            min-width: 100px;
            min-height: 100px;
            }
/*
  Minimum height and width is a good idea to prevent negative SVG dimensions...
  For example width should be =< margin.left + margin.right + 1,
  of course 1 pixel for the entire chart would not be very useful, BUT should not have errors
*/


</style>

    <div id="wrapper">
        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    
                    <h1 class="page-header"><strong>BIGGEST PROBLEMS AT THE NATIONAL LEVEL</strong></h1>

                </div>
            </div>
                    
                     <svg id="chart1" class="with-3d-shadow with-transitions"></svg>
   

                <div id="menu-wrapper">
                    <div id="menu-canvas">
                    <div id="site-menu"> 
                    
                        <h4>What is the biggest problem facing Afghanistan as a whole? What is the next biggest problem?</h4>
                        <p>Corruption, insecurity, unemployment, and the poor state of the economy are largely believed to be among the biggest problems facing the country. Corruption was most often mentioned as the biggest problem, followed by security issues. Unemployment was most often viewed as the second biggest problem followed by the poor economic situation.</p>
                    </div> 
            
                    
                    <a class="toggle-nav btn btn-sm btn-primary" id="info"><i class="fa fa-info"></i></a>
                    <a class="toggle-nav"></a>    
                </div> 
               </div>     
            </div>
        </div> 


    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <script>
   
    var data = [
    {
        "key": "Official Corruption",
        "values": [
            {
                "label": "Biggest Problem",
                "value": 27.3
            },
            {
                "label": "Second Biggest Problem",
                "value": 8.8
            }
        ]
    },
    {
        "key": "Security Issues",
        "values": [
            {
                "label": "Biggest Problem",
                "value": 19.5
            },
            {
                "label": "Second Biggest Problem",
                "value": 10.2
            }
        ]
    },
    {
        "key": "Weak Government",
        "values": [
            {
                "label": "Biggest Problem",
                "value": 16.1
            },
            {
                "label": "Second Biggest Problem",
                "value": 2.7
            }
        ]
    },
    {
        "key": "Poor Economy",
        "values": [
            {
                "label": "Biggest Problem",
                "value": 11.7
            },
            {
                "label": "Second Biggest Problem",
                "value": 19.2
            }
        ]
    },
    {
        "key": "Unemployment",
        "values": [
            {
                "label": "Biggest Problem",
                "value": 9.4
            },
            {
                "label": "Second Biggest Problem",
                "value": 23.1
            }
        ]
    },
    {
        "key": "Lack of Education",
        "values": [
            {
                "label": "Biggest Problem",
                "value": 4.0
            },
            {
                "label": "Second Biggest Problem",
                "value": 4.4
            }
        ]
    },
    {
        "key": "Crime",
        "values": [
            {
                "label": "Biggest Problem",
                "value": 3.2
            },
            {
                "label": "Second Biggest Problem",
                "value": 8.4
            }
        ]
    },
    {
        "key": "Unpaved Roads",
        "values": [
            {
                "label": "Biggest Problem",
                "value": 2.6
            },
            {
                "label": "Second Biggest Problem",
                "value": 5.3
            }
        ]
    },
    {
        "key": "Lack of Electricity",
        "values": [
            {
                "label": "Biggest Problem",
                "value": 2.6
            },
            {
                "label": "Second Biggest Problem",
                "value": 5.8
            }
        ]
    },
    {
        "key": "Lack of Potable Water",
        "values": [
            {
                "label": "Biggest Problem",
                "value": 2.2
            },
            {
                "label": "Second Biggest Problem",
                "value": 3.8
            }
        ]
    },
    {       
        "key": "Lack of Health Care Services",
        "values": [
            {
                "label": "Biggest Problem",
                "value": 1.0
            },
            {
                "label": "Second Biggest Problem",
                "value": 3.6
            }
        ]
        },
        {
        "key": "Political Division",
        "values": [
            {
                "label": "Biggest Problem",
                "value": null
            },
            {
                "label": "Second Biggest Problem",
                "value": 2.6
            }
        ]
        },
        {
        "key": "Ethnic Division",
        "values": [
            {
                "label": "Biggest Problem",
                "value": null
            },
            {
                "label": "Second Biggest Problem",
                "value": 1.2
            }
        ]
        }
]


var chart;
    nv.addGraph(function() {
        chart = nv.models.multiBarChart()
            .x(function(d) { return d.label })
            .y(function(d) { return d.value / 100 })
            //.barColor(d3.scale.category10().range())
            .duration(1200)
            .tooltipContent(function(key, x, y, e, graph) {
        return '<h3>' + key + '</h3><p>' + y + '</p>'
    });
            //.growOnHover(true)
            //.stacked(true);
            
        chart.yAxis.tickFormat(d3.format('.1%'));

        d3.select('#chart1')
            .datum(data)
            .transition().duration(1200)
            .call(chart);
        nv.utils.windowResize(chart.update);
        chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });
        chart.state.dispatch.on('change', function(state){
            nv.log('state', JSON.stringify(state));
        });
        return chart;
    });



/*

    nv.addGraph(function() {
        var chart = nv.models.pieChart()
            .x(function(d) { return d.x })
            .y(function(d) { return d.y })
            //.color(d3.scale.category20().range().slice(8))
            .growOnHover(true)
            .width(width)
            .height(height);
        d3.select("#chart1")
            .datum(success1)
            .transition().duration(1200)
            .attr('width', width)
            .attr('height', height)
            .call(chart);
        return chart;
    });
    
     nv.addGraph(function() {
        var chart = nv.models.pieChart()
            .x(function(d) { return d.x })
            .y(function(d) { return d.y })
            .color(d3.scale.category20().range().slice(8))
            .growOnHover(true)
            .tooltipContent(function(key, y, e, graph) {
              return '<h5 style="padding: 5px; background-color: '
                        + e.color + x + '<h5 style="padding:5px;>' +  y + '</h5>';
            })
            .width(width)
            .height(height);
        d3.select("#chart2")
            .datum(success2)
            .transition().duration(1200)
            .attr('width', width)
            .attr('height', height)
            .call(chart);
        return chart;
    });

*/
</script>