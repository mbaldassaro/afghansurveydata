<!-- Democracy & Institutions - Satisfaction with Elections -->

<style>
      
        svg {
            display: block;
            float: left;
            height: 66%;
            min-width: 500px;
        } 

/*
  Minimum height and width is a good idea to prevent negative SVG dimensions...
  For example width should be =< margin.left + margin.right + 1,
  of course 1 pixel for the entire chart would not be very useful, BUT should not have errors
*/


</style>

    <div id="wrapper">
        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    
                    <h1 class="page-header"><strong>SATISFACTION WITH ELECTIONS IN AFGHANISTAN</strong></h1>

                </div>
            </div>
                    
                     <svg id="chart1" class="with-3d-shadow with-transitions"></svg>
                     <svg id="chart2" class="with-3d-shadow with-transitions"></svg>
                    

                <div id="menu-wrapper">
                    <div id="menu-canvas">
                    <div id="site-menu"> 
                    
                        <h4>Overall, how satisfied are you with the way elections work in Afghanistan?</h4>
                        <p>Despite the prolonged presidential election in 2014, seven-in-ten respondents are at least somewhat satisfied with the way elections work in Afghanistan. One-in-seven Afghans are very dissatisfied with the way elections work in Afghanistan, which is about the same number of Afghans that is very dissatisfied with how democracy works in the country.</p>
                    </div> 
            
                    
                    <a class="toggle-nav btn btn-sm btn-primary" id="info"><i class="fa fa-info"></i></a>
                    <a class="toggle-nav"></a>    
                </div> 
               </div>     
            </div>
        </div> 


    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <script>
   
   var data1 = [
        {key: "Very Satisfied", y: 28.4},
        {key: "Somewhat Satisfied", y: 40.7},
        {key: "Somewhat Dissatisfied", y: 15.6},
        {key: "Very Dissatisfied", y: 14.5},
        {key: "Don't Know", y: 0.8}
    ];

   var data2 = [
    {
        "key": "Very Satisfied",
        "color": "#005288", //blue
        "values": [
            {   "label": "National Average",
                "value": 28.4
            },
            {
                "label": "Central",
                "value": 26.4
            },
            {
                "label": "Central Highlands",
                "value": 38.3
            },
            {
                "label": "East",
                "value": 47.3
            },
            {
                "label": "North",
                "value": 26.1
            },
            {
                "label": "North East",
                "value": 27.3
            },
            {
                "label": "South",
                "value": 35.3
            },
            {
                "label": "South East",
                "value": 19.9
            },
            {
                "label": "West",
                "value": 20.8
            }
        ]
    },
    {
        "key": "Somewhat Satisfied",
        "color": "#7AA9DD", //light blue
        "values": [
            {   "label": "National Average",
                "value": 40.7
            },
            {
                "label": "Central",
                "value": 37.1
            },
            {
                "label": "Central Highlands",
                "value": 35.4
            },
            {
                "label": "East",
                "value": 37.6
            },
            {
                "label": "North",
                "value": 43.1
            },
            {
                "label": "North East",
                "value": 37.8
            },
            {
                "label": "South",
                "value": 45.0
            },
            {
                "label": "South East",
                "value": 53.0
            }, 
            {
                "label": "West",
                "value": 37.6
            }
        ]
    },
    {
        "key": "Somewhat Dissatisfied",
        "color": "#BC8F8F", //light red
        "values": [
            {   "label": "National Average",
                "value": 15.6
            },   
            {
                "label": "Central",
                "value": 13.9
            },
            {
                "label": "Central Highlands",
                "value": 14.0
            },
            {
                "label": "East",
                "value": 5.9
            },
            {
                "label": "North",
                "value": 18.4
            },
            {
                "label": "North East",
                "value": 18.0
            },
            {
                "label": "South",
                "value": 13.5
            },
            {
                "label": "South East",
                "value": 19.4
            }, 
            {
                "label": "West",
                "value": 19.3
            }
        ]
    },
    {
        "key": "Very Dissatisfied",
        "color": "#800000", //red
        "values": [
            {   "label": "National Average",
                "value": 14.5
            },
            {
                "label": "Central",
                "value": 21.7
            },
            {
                "label": "Central Highlands",
                "value": 11.6
            },
            {
                "label": "East",
                "value": 9.2 
            },
            {
                "label": "North",
                "value": 9.4
            },
            {
                "label": "North East",
                "value": 16.2
            },
            {
                "label": "South",
                "value": 6.1
            },
            {
                "label": "South East",
                "value": 7.4
            },
            {
                "label": "West",
                "value": 22.3
            }
        ]
    }
]
    
nv.addGraph(function() {
        var chart = nv.models.pieChart()
            .x(function(d) { return d.key })
            .y(function(d) { return d.y })
            .color(["#005288", "#7AA9DD", "#BC8F8F", "#800000", "gray"]) 
            .labelType("value")
            //.tooltips(false)
            .tooltipContent(function(key, y, e, graph) {
                return '<h5 style="padding: 5px; text-align: center">' + key + '</h5>'
                        + '<p style="padding: 5px;">' +  y + '%</p>';
            })
            //.width(width)
            //.height(height);
        d3.select("#chart1")
            .datum(data1)
            .transition().duration(1200)
            .call(chart);
        return chart;
    });

nv.addGraph(function() {
  var chart = nv.models.multiBarHorizontalChart()
      .x(function(d) { return d.label })
      .y(function(d) { return d.value / 100 })
      .margin({left: 100})
      /*.tooltipContent(function(key, x, y, e, graph) {
        return '<h5 style="text-align:center; padding:0px; color:#000; font-weight: 700">' + key + " (" + x + ")</h5><h4 style='text-align: center; color: #000; font-weight: 700;'>" + y + '</h5>'
    });*/

      
        //.showValues(false)
        .tooltips(true)
        //.barColor(d3.scale.category20().range())
        .stacked(true)
        //.showControls(false);

  chart.yAxis 
    .tickFormat(d3.format('.1%'));
  //chart.xAxis
    //.tickFormat(d3.format('d'));

  d3.select('#chart2')
      .datum(data2)
      .transition().duration(1200)
      .call(chart);

  nv.utils.windowResize(chart.update);

  chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

  return chart;
});

</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60568590-1', 'auto');
  ga('send', 'pageview');

</script>